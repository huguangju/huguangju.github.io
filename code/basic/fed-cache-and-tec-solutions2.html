<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://huguangju.cn/code/basic/fed-cache-and-tec-solutions2.html"><meta property="og:site_name" content="博客演示"><meta property="og:title" content="前端缓存与技术方案（下）"><meta property="og:description" content="HTTP 缓存方案 前端应用中的 HTTP 缓存方案 当访问单页应用（SPA）的首页时，浏览器率先加载的是 HTML 文件，后续再按需加载其它公共资源。刷新页面，可观察 HTML 资源是走的协商缓存，其它大部分资源都命中了强缓存。 因为像 JS、CSS 等资源经过像 webpack 这样的打包工具打包后可以自动生成 hash 文件名，资源变化会导致 h..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-11-21T05:33:38.000Z"><meta property="article:tag" content="缓存"><meta property="article:published_time" content="2023-02-17T00:00:00.000Z"><meta property="article:modified_time" content="2024-11-21T05:33:38.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"前端缓存与技术方案（下）","image":[""],"datePublished":"2023-02-17T00:00:00.000Z","dateModified":"2024-11-21T05:33:38.000Z","author":[{"@type":"Person","name":"huguangju","url":"https://huguangju.cn"}]}</script><title>前端缓存与技术方案（下） | 博客演示</title><meta name="description" content="HTTP 缓存方案 前端应用中的 HTTP 缓存方案 当访问单页应用（SPA）的首页时，浏览器率先加载的是 HTML 文件，后续再按需加载其它公共资源。刷新页面，可观察 HTML 资源是走的协商缓存，其它大部分资源都命中了强缓存。 因为像 JS、CSS 等资源经过像 webpack 这样的打包工具打包后可以自动生成 hash 文件名，资源变化会导致 h...">
    <link rel="preload" href="/assets/style-rrACFxWS.css" as="style"><link rel="stylesheet" href="/assets/style-rrACFxWS.css">
    <link rel="modulepreload" href="/assets/app-C_1RVQww.js"><link rel="modulepreload" href="/assets/fed-cache-and-tec-solutions2.html-BV8oI1Wj.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-TmsvFbWm.js" as="script"><link rel="prefetch" href="/assets/index.html-DoZckma5.js" as="script"><link rel="prefetch" href="/assets/pnpm-intro.html-Ch4J-Xoy.js" as="script"><link rel="prefetch" href="/assets/scaffold-cli.html-CKUN-bXW.js" as="script"><link rel="prefetch" href="/assets/electron-vite-template.html-BNO1ii1l.js" as="script"><link rel="prefetch" href="/assets/index.html-BSZZZ6DD.js" as="script"><link rel="prefetch" href="/assets/index.html-BpVvOlFn.js" as="script"><link rel="prefetch" href="/assets/index.html-Cvlnlcip.js" as="script"><link rel="prefetch" href="/assets/sliding-window.html-Lk_lq1Ze.js" as="script"><link rel="prefetch" href="/assets/fed-cache-and-tec-solutions1.html-CoMCvbvI.js" as="script"><link rel="prefetch" href="/assets/mitt.html-DPfh2FD0.js" as="script"><link rel="prefetch" href="/assets/index.html-OkQzE_VB.js" as="script"><link rel="prefetch" href="/assets/introduction.html-DCCRHbnX.js" as="script"><link rel="prefetch" href="/assets/index.html-C6iahBVf.js" as="script"><link rel="prefetch" href="/assets/frontend-framework-principle.html-DbFKUSYt.js" as="script"><link rel="prefetch" href="/assets/react-desigin-concept.html-wT7LKdRa.js" as="script"><link rel="prefetch" href="/assets/index.html-B2inAjod.js" as="script"><link rel="prefetch" href="/assets/core-elements-of-framework-design.html-BcOIzBk0.js" as="script"><link rel="prefetch" href="/assets/the-art-of-weighing.html-DkkMSD0R.js" as="script"><link rel="prefetch" href="/assets/index.html-DSrBiQBi.js" as="script"><link rel="prefetch" href="/assets/css-interview.html-C6fYN0VM.js" as="script"><link rel="prefetch" href="/assets/js-interview.html-Db5QUezN.js" as="script"><link rel="prefetch" href="/assets/reactivity-fundamentals.html-BjqQQLQd.js" as="script"><link rel="prefetch" href="/assets/reactivity-in-deep.html-SIoL-hHS.js" as="script"><link rel="prefetch" href="/assets/404.html-CnPAo6vh.js" as="script"><link rel="prefetch" href="/assets/index.html-B5ez0Ahk.js" as="script"><link rel="prefetch" href="/assets/index.html-BgFOE9JK.js" as="script"><link rel="prefetch" href="/assets/index.html-MIBQA7h7.js" as="script"><link rel="prefetch" href="/assets/index.html-D_P23840.js" as="script"><link rel="prefetch" href="/assets/index.html-DJZQZKAH.js" as="script"><link rel="prefetch" href="/assets/index.html-w9Fq4_ak.js" as="script"><link rel="prefetch" href="/assets/index.html-CHNChPyD.js" as="script"><link rel="prefetch" href="/assets/index.html-aT8na8eV.js" as="script"><link rel="prefetch" href="/assets/index.html-FBitHdLU.js" as="script"><link rel="prefetch" href="/assets/index.html-CZi8-alT.js" as="script"><link rel="prefetch" href="/assets/index.html-BfCdFkZN.js" as="script"><link rel="prefetch" href="/assets/index.html-CUC6bfVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CfhvOLZZ.js" as="script"><link rel="prefetch" href="/assets/index.html-xOrNyxEB.js" as="script"><link rel="prefetch" href="/assets/index.html-DdYz562r.js" as="script"><link rel="prefetch" href="/assets/index.html-dquoLzvk.js" as="script"><link rel="prefetch" href="/assets/index.html-Cttua7Fe.js" as="script"><link rel="prefetch" href="/assets/index.html-B7DwUlO8.js" as="script"><link rel="prefetch" href="/assets/index.html-BYjRpe95.js" as="script"><link rel="prefetch" href="/assets/index.html-DvJYWaO0.js" as="script"><link rel="prefetch" href="/assets/index.html-Do5URHgC.js" as="script"><link rel="prefetch" href="/assets/index.html-DpaOsXA2.js" as="script"><link rel="prefetch" href="/assets/index.html-mI6HkCa3.js" as="script"><link rel="prefetch" href="/assets/index.html-B8HcSMDy.js" as="script"><link rel="prefetch" href="/assets/index.html-C8vG1Ods.js" as="script"><link rel="prefetch" href="/assets/index.html-gObMc59C.js" as="script"><link rel="prefetch" href="/assets/index.html-DzPLp6n8.js" as="script"><link rel="prefetch" href="/assets/index.html-thlAHC2m.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-CUiZ4CF8.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-Bnqw6PRA.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container no-sidebar external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">博客演示</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:home-outlined" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="读记"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:read-outlined" width="1em" height="1em"></iconify-icon>读记<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/" aria-label="读记"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:read-outlined" width="1em" height="1em"></iconify-icon><!--]-->读记<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/react-design-principles/" aria-label="《React 设计原理》"><!---->《React 设计原理》<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/vue-design-and-achieve/" aria-label="《Vue.js 设计与实现》"><!---->《Vue.js 设计与实现》<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/programming-typescript/" aria-label="《TypeScript 编程》"><!---->《TypeScript 编程》<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="资源"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:deployment-unit-outlined" width="1em" height="1em"></iconify-icon>资源<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/resource/" aria-label="导航"><!---->导航<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/resource/interview/" aria-label="面试题"><!---->面试题<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/huguangju/huguangju.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->前端缓存与技术方案（下）</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://huguangju.cn" target="_blank" rel="noopener noreferrer">huguangju</a></span><span property="author" content="huguangju"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023年2月17日</span><meta property="datePublished" content="2023-02-17T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 20 分钟</span><meta property="timeRequired" content="PT20M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color0 clickable" role="navigation">基础</span><!--]--><meta property="articleSection" content="基础"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color0 clickable" role="navigation">缓存</span><!--]--><meta property="keywords" content="缓存"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#http-缓存方案">HTTP 缓存方案</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#前端应用中的-http-缓存方案">前端应用中的 HTTP 缓存方案</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#webpack-中的-hash-模式">Webpack 中的 Hash 模式</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#用户操作与-http-缓存">用户操作与 HTTP 缓存</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#chrome-的三种加载模式">Chrome 的三种加载模式</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#nginx-与跨域问题">Nginx 与跨域问题</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用-nginx-配置响应报头">使用 Nginx 配置响应报头</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#memory-cache-与-disk-cache">Memory Cache 与 Disk Cache</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#memory-cache">Memory Cache</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#disk-cache">Disk Cache</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#浏览器缓存机制">浏览器缓存机制</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#缓存获取顺序">缓存获取顺序</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#缓存存储优先级">缓存存储优先级</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#preload-与-prefetch">Preload 与 Prefetch</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#service-worker">Service Worker</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#pwa">PWA</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#service-worker-介绍">Service Worker 介绍</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#存储型缓存">存储型缓存</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#网站登录背后的存储逻辑">网站登录背后的存储逻辑</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#浏览器存储型缓存方案">浏览器存储型缓存方案</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#chrome-浏览器-application-面板">Chrome 浏览器 Application 面板</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#参考">参考</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="http-缓存方案" tabindex="-1"><a class="header-anchor" href="#http-缓存方案"><span>HTTP 缓存方案</span></a></h2><h3 id="前端应用中的-http-缓存方案" tabindex="-1"><a class="header-anchor" href="#前端应用中的-http-缓存方案"><span>前端应用中的 HTTP 缓存方案</span></a></h3><p>当访问单页应用（SPA）的首页时，浏览器率先加载的是 HTML 文件，后续再按需加载其它公共资源。刷新页面，可观察 HTML 资源是走的协商缓存，其它大部分资源都命中了强缓存。</p><p>因为像 JS、CSS 等资源经过像 webpack 这样的打包工具打包后可以自动生成 hash 文件名，资源变化会导致 hash 名更新。而 HTML 的文件名不会改变。</p><p>但我们期望浏览器每次加载时都应该向服务器询问是否更新。否则会出现新版本发布后，浏览器读取缓存 HTML 文件，会导致页面空白报错（旧资源被删除）或应用没有更新（读取了旧资源）的问题。</p><!-- more --><p>根据 HTTP 缓存的规则可使用以下缓存方案：</p><ul><li>频繁变动的资源，比如 HTML，采用协商缓存</li><li>CSS、JS、图片资源等采用强缓存，使用 hash 命名</li></ul><p><strong>如何让 HTML 文件走协商缓存？</strong></p><p>前提：先让浏览器强缓存失效。可以设置如下服务器响应报头：</p><div class="language-http line-numbers-mode" data-highlighter="shiki" data-ext="http" data-title="http" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Cache-Control</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> max-age=0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Last-Modified</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sat, 04 Sep 2021 08:59:40 GMT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>在资源 0 秒就失效的情况下，存在协商缓存触发条件的 <code>Last-Modified</code> 标识，这样每次访问加载的 HTML 资源就会确保是最新的，解决了 HTML 被浏览器强缓存的问题。</p><h3 id="webpack-中的-hash-模式" tabindex="-1"><a class="header-anchor" href="#webpack-中的-hash-模式"><span>Webpack 中的 Hash 模式</span></a></h3><p>在 Webpack 中，有三种常见的哈希类型，分别是 <code>hash</code>、<code>chunkhash</code> 和 <code>contenthash</code>。</p><p><strong><code>hash</code></strong></p><p>默认使用。项目级别的 hash，整个项目生成一个唯一的哈希值（即使只修改了一个文件，也会导致所有的文件名都发生变化导致缓存失效，不建议使用）。</p><p><strong><code>chunkhash</code></strong></p><p>入口文件（entry）级别的 hash，基于每个 chunk 的内容生成一个哈希值。因此，当项目中只有部分文件发生变化时，只有受影响的 chunk 的哈希值会发生变化(可通过 <code>CommonsChunkPlugin</code> 插件进行公共模块的提取，将公共库、插件打包成独立文件)。</p><p><strong><code>contenthash</code></strong></p><p>文件内容级别的 hash，基于文件内容生成的哈希值，在文件内容发生变化时，对应的哈希值才会变化。因此，当项目中只有部分文件发生变化时，只有受影响的文件的哈希值会发生变化。</p><p>比如，一个 a.js 文件中引入了 a.css，那么当 js 文件被修改后，就算 css 文件并没有被修改，由于该模块发生了改变，同样会导致 css 文件也被重复构建。 此时，针对 css 使用 <code>contenthash</code> 后，只要其内容不变就不会被重复构建。</p><p><strong>为了最大化利用 HTTP 缓存中的强缓存优势，可以使用 Webpack 中的 <code>[contenthash]</code> 和 <code>[chunkhash]</code> 两个 hash 值来命名输出的文件，以减少不必要的资源重复请求，提升网页的整体打开速度。</strong></p><h2 id="用户操作与-http-缓存" tabindex="-1"><a class="header-anchor" href="#用户操作与-http-缓存"><span>用户操作与 HTTP 缓存</span></a></h2><h3 id="chrome-的三种加载模式" tabindex="-1"><a class="header-anchor" href="#chrome-的三种加载模式"><span>Chrome 的三种加载模式</span></a></h3><p>在开发者工具打开时，Chrome 提供了三种加载模式（浏览器刷新按钮上右键鼠标可显示）。</p><p>模式一：<strong>正常重新加载</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Mac: Command + R 快捷键</span></span>
<span class="line"><span>Windows: Ctrl + R（等同于直接按 F5）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>和直接点击浏览器上的刷新按钮效果一样，触发该模式在控制台可以看到大多数资源会命中强缓存，即会优先读取缓存。</p><p>模式二：<strong>硬性重新加载</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Mac: Command + Shift + R</span></span>
<span class="line"><span>Windows: Ctrl + Shift + R（等同于直接按 Ctrl + F5）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>常说的“强制刷新网页”，比如部署代码后仍然访问的是“旧”页面，使用强制刷新（Ctrl + F5）后，所有资源都会重新向服务器获取。</p><p>检查请求报头可以发现，所有资源的请求首部都被加上了 <code>cache-control: no-cache</code> 和 <code>pragma: no-cache</code>，两者的作用都表示告知（代理）服务器不直接使用缓存，要求向源服务器发起请求，而 <code>pragma</code> 则是为了兼容 <code>HTTP/1.0</code>。</p><p>因此<strong>硬性重新加载并没有清空缓存，而是禁用缓存</strong>。其效果类似于在开发者工具 Network 面板勾选了 <code>Disable cache</code> 选项。</p><h4 id="模式三-清空缓存并硬性重新加载" tabindex="-1"><a class="header-anchor" href="#模式三-清空缓存并硬性重新加载"><span>模式三：清空缓存并硬性重新加载</span></a></h4><p>比硬性重新加载多了清空缓存的操作，会将浏览器存储的本地缓存都清空掉（所有访问过的网站缓存都将被清除），再重新向服务器发送请求。</p><h4 id="为什么-ctrl-f5-还是命中了缓存" tabindex="-1"><a class="header-anchor" href="#为什么-ctrl-f5-还是命中了缓存"><span>为什么 Ctrl + F5 还是命中了缓存</span></a></h4><p>资源在硬性重新加载后还是命中缓存，说明请求报头上并没有加上特定的两个首部。命中缓存的资源都是随着页面渲染而加载的，而不走缓存的则是等待页面加载完通过脚本异步插入到 DOM 中去的，即<strong>资源异步加载命中缓存不受硬性重新加载控制</strong>。</p><div class="hint-container info"><p class="hint-container-title">Tips</p><p>如果采用开发者工具 Network 面板勾选 <code>Disable cache</code> 选项方式，那么异步资源也不会读取缓存，原因是缓存被提前禁用了，这与硬性重新加载不同。</p></div><div class="hint-container info"><p class="hint-container-title">base64 图片缓存</p><p>base64 格式的图片几乎永远都是 <code>from memory cache</code>，因为浏览器为了节省渲染开销而将其缓存到内存中。</p></div><h2 id="nginx-与跨域问题" tabindex="-1"><a class="header-anchor" href="#nginx-与跨域问题"><span>Nginx 与跨域问题</span></a></h2><p>在前端开发中，Nginx 通常被用来解决跨域问题。跨域问题是由于浏览器的同源策略导致的，为了解决这个问题，可以通过设置响应头中的 <code>Access-Control-Allow-Origin</code> 来指定允许访问的域名。因此，在前端访问后端跨域时，需要检查服务端或者 Nginx 配置的 <code>Access-Control-Allow-Origin</code> 是否包含前端域名。</p><p>有些时候 <code>Access-Control-Allow-Origin</code> 被设置成 * 代表允许所有域名访问，但可能还会报跨域，其根源其实在前端。比如前端使用 Axios 请求库时如果开启了以下配置：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">axios</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">defaults</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">withCredentials</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 允许携带 cookie</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此时服务端配置 Access-Control-Allow-Origin 时就不能为 *，或者针对该类型的接口前端请求关闭该配置即可。</p><p>同时当前端配置了 <code>axios.defaults.withCredentials = true</code> 时，服务端需配置 <code>access-control-allow-credentials: true</code>。</p><p>如果浏览器发起了预检请求，那么可能还需要配置 <code>access-control-allow-methods</code> 和 <code>access-control-allow-headers</code> 报头为允许的值。比如：</p><div class="language-http line-numbers-mode" data-highlighter="shiki" data-ext="http" data-title="http" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">access-control-allow-headers</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Content-Type,Content-Length,Authorization,Accept,X-Requested-With</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">access-control-allow-methods</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PUT,POST,GET,DELETE,OPTIONS</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>所谓<strong>预检请求</strong>，也就是浏览器控制台经常会看到的 <code>OPTIONS</code> 请求。</p><h3 id="使用-nginx-配置响应报头" tabindex="-1"><a class="header-anchor" href="#使用-nginx-配置响应报头"><span>使用 Nginx 配置响应报头</span></a></h3><p><strong>修改跨域相关配置</strong> 如果要修改上述的跨域配置，那么首先找到对应的应用端口，修改 <code>location /</code> 中的参数：</p><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" data-title="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    listen </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Access-Control-Allow-Origin *; </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Access-Control-Allow-Methods </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;PUT,POST,GET,DELETE,OPTIONS&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Access-Control-Allow-Headers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Content-Type,Content-Length, Authorization, Accept,X-Requested-With&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ($</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">request_method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;OPTIONS&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 204</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>修改缓存相关配置</strong> Nginx 主要修改缓存方式和过期时间的配置。比如不想 HTML 文件命中强缓存，希望其走协商缓存，可以添加如下响应报头配置：</p><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" data-title="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    listen </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ($</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">request_filename</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ~* .*.(html|htm)$) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Cache-Control </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;no-cache&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而像 js、css 和图片这样的静态资源，希望浏览器命中强缓存，nginx 可以设置相应的过期时间：</p><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" data-title="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    listen </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ~ </span><span style="--shiki-light:#0184BC;--shiki-dark:#E06C75;">.*.(gif|jpg|jpeg|png|bmp|swf|js|css)$ </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        expires </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述配置以 1 天为例，最终浏览器将返回响应报头 <code>Cache-Control: max-age=86400</code>。</p><h2 id="memory-cache-与-disk-cache" tabindex="-1"><a class="header-anchor" href="#memory-cache-与-disk-cache"><span>Memory Cache 与 Disk Cache</span></a></h2><h3 id="memory-cache" tabindex="-1"><a class="header-anchor" href="#memory-cache"><span>Memory Cache</span></a></h3><p>一种缓存机制，用于存储最近访问的资源，例如图片、CSS 和 JavaScript 文件等。它存储在内存中，读取速度快，可以减少网络请求，提高网页加载速度。但是它的容量较小，不适合存储大型文件。</p><h3 id="disk-cache" tabindex="-1"><a class="header-anchor" href="#disk-cache"><span>Disk Cache</span></a></h3><p>可以将一些已经访问过的网页资源保存在本地硬盘上，以便下次访问同一网页时可以更快地加载资源，提高网页加载速度和用户体验。优点是生命周期长，不触发删除操作则一直存在，而缺点则是获取资源的速度相对内存缓存较慢。</p><p>Disk Cache 会根据保存下来的资源的 HTTP 首部字段来判断它们是否需要重新请求，如果重新请求那便是强缓存的失效流程，否则便是生效流程。</p><h2 id="浏览器缓存机制" tabindex="-1"><a class="header-anchor" href="#浏览器缓存机制"><span>浏览器缓存机制</span></a></h2><h3 id="缓存获取顺序" tabindex="-1"><a class="header-anchor" href="#缓存获取顺序"><span>缓存获取顺序</span></a></h3><p>当一个资源准备加载时，浏览器会根据其<strong>三级缓存原理</strong>进行判断：</p><ul><li>浏览器会率先查找内存缓存，如果资源在内存中存在，那么直接从内存中加载</li><li>如果内存中没找到，接下去会去磁盘中查找，找到便从磁盘中获取</li><li>如果磁盘中也没有找到，那么就进行网络请求，并将请求后符合条件的资源存入内存和磁盘中</li></ul><h3 id="缓存存储优先级" tabindex="-1"><a class="header-anchor" href="#缓存存储优先级"><span>缓存存储优先级</span></a></h3><p>除了 base64 的图片永远从内存加载外，其他大部分资源会从磁盘加载。</p><p>磁盘缓存会将命中强缓存的 JS、CSS、图片等资源保存下来。而内存缓存仅会保存合适的内容。</p><p>浏览器内存缓存生效的前提下，JS 资源的执行加载时间会影响其是否被内存缓存。此外图片资源（非 base64）也有和 JS 资源同样的现象，而 CSS 资源比较与众不同，其被磁盘缓存的概率远大于被内存缓存。</p><h3 id="preload-与-prefetch" tabindex="-1"><a class="header-anchor" href="#preload-与-prefetch"><span>Preload 与 Prefetch</span></a></h3><p><code>preload</code> 也称为预加载，用于在页面加载时预加载资源，以提高页面的性能和用户体验。通过使用 <code>&lt;link rel=&quot;preload&quot;&gt;</code>，浏览器可以在页面加载时提前下载一些资源，以便在后续的页面渲染过程中更快地获取这些资源。</p><p>注意，预加载资源并不一定会被浏览器缓存，因此在使用时，需要根据具体情况来决定是否需要设置缓存策略。另外，预加载资源也可能会对服务器造成额外的负担，因此需要谨慎使用。</p><p><code>preload</code> 则表示预提取，用于在<strong>空闲时间</strong>预加载资源，以提高页面的性能和用户体验。<code>&lt;link rel=&quot;prefetch&quot;&gt;</code> 不会在页面加载时立即下载资源，而是在浏览器空闲时下载资源，以便在后续的页面渲染过程中更快地获取这些资源。</p><p>使用 prefetch 加载的资源，刷新页面时大概率会从磁盘缓存中读取，如果跳转到使用它的页面，则直接会从磁盘中加载该资源。</p><h2 id="service-worker" tabindex="-1"><a class="header-anchor" href="#service-worker"><span>Service Worker</span></a></h2><h3 id="pwa" tabindex="-1"><a class="header-anchor" href="#pwa"><span>PWA</span></a></h3><p>PWA 全称为 Progressive Web Apps，是一种可以像本地应用一样提供快速、可靠和具有类似原生应用体验的 Web 应用。</p><p>PWA 的实现需要借助 Service Worker 技术和 Web App Manifest 文件。 PWA 技术的出现，使得 Web 应用在移动端能够更好地满足用户对于快速、可靠和具有本地应用体验的需求。</p><p>以下是 PWA 的几个主要特性：</p><ul><li><p><strong>可靠性</strong>：PWA 可以在离线状态下访问，具有快速的加载速度和可靠的性能。</p></li><li><p><strong>快速性</strong>：PWA 具有快速的加载速度，可以在几秒钟内快速加载应用程序。</p></li><li><p><strong>独立性</strong>：PWA 可以像本地应用一样运行，不需要安装，也不需要从应用商店下载。</p></li><li><p><strong>用户体验</strong>：PWA 具有类似原生应用的 UI 交互体验，可以提供推送通知、添加到主屏幕、后台服务等原生应用所具备的功能。</p></li><li><p><strong>安全性</strong>：PWA 使用 HTTPS 协议进行通信，可以提供更高的安全性和保护用户隐私的能力。</p></li><li><p><strong>可发现性</strong>：PWA 可以被搜索引擎索引，可以通过链接分享和搜索引擎等方式被用户发现和访问。</p></li></ul><h3 id="service-worker-介绍" tabindex="-1"><a class="header-anchor" href="#service-worker-介绍"><span>Service Worker 介绍</span></a></h3><p>Service Worker 的本质是一种 JavaScript 脚本，它运行在浏览器的后台线程中，独立于网页主线程，可以拦截和处理网页发出的网络请求，从而可以实现离线缓存、消息推送等功能。 因为它是运行在后台线程中的，所以即使用户关闭了网页，Service Worker 仍然可以继续运行。这使得 Service Worker 成为一种非常有用的技术，可以用来提高网页的性能和用户体验。</p><p>Service Worker 依赖 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Cache" target="_blank" rel="noopener noreferrer">Cache API</a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">Fetch API</a> 来实现离线缓存和网络请求拦截。<strong>Service Worker 缓存是持久的，独立于浏览器缓存或网络状态</strong>。</p><p><strong>生命周期与缓存</strong> Service Worker 的生命周期包括以下几个阶段：</p><ul><li><p>注册：Service Worker 脚本被注册到浏览器中，此时脚本还没有被激活。</p></li><li><p>安装：Service Worker 脚本被下载到浏览器中，并进行安装。在安装阶段，通常会进行一些初始化操作，例如打开缓存等。</p></li><li><p>激活：Service Worker 脚本被激活，此时可以开始拦截网络请求并进行缓存操作。</p></li><li><p>运行：Service Worker 脚本开始运行，可以处理网络请求并进行缓存操作。</p></li><li><p>更新：Service Worker 脚本被更新，此时会重新执行安装和激活阶段，并且可以清除旧的缓存。</p></li></ul><p>在 Service Worker 的生命周期中，缓存是一个非常重要的概念。在安装阶段，通常会打开一个缓存，将需要缓存的资源添加到缓存中。在激活和运行阶段，可以从缓存中读取资源，并且可以将新的资源添加到缓存中。通过缓存，可以实现离线缓存和网络请求拦截等功能，从而提高网页的性能和用户体验。</p><p>注意，Service Worker 缓存的资源是有时效性的，因为缓存中的资源可能会过期或者被更新。因此，在更新 Service Worker 脚本时，通常需要清除旧的缓存，以便新的资源可以被缓存。</p><p><strong>注册</strong> 通常会编写以下脚本进行 Service Worker 的注册：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;serviceWorker&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> navigator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addEventListener</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;load&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    navigator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">serviceWorker</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">register</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;/service-worker.js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">then</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Service Worker registered:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Service Worker registration failed:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这段代码首先检查浏览器是否支持 Service Worker，如果支持，则在页面加载完成后注册 Service Worker。<code>navigator.serviceWorker.register</code> 方法用于注册 Service Worker，参数是 Service Worker 脚本的 URL。注册成功后，会返回一个 <code>ServiceWorkerRegistration</code> 对象，可以用来管理 Service Worker 的生命周期。</p><p>默认情况下，Service Worker 的作用范围不能超出其脚本所在的路径。如果该脚本放在根目录下，则代表项目根目录下的所有请求都可以被代理。当然，也可以在注册时使用 <code>scope</code> 参数指定对应的作用域。</p><p><strong>安装</strong> 在安装阶段，通常会进行以下几个步骤：</p><ul><li><p>下载脚本：浏览器会下载 Service Worker 脚本，并将其保存到缓存中。</p></li><li><p>缓存静态资源：在 Service Worker 脚本中，可以通过 <code>CacheStorage</code> API 将一些静态资源添加到缓存中，从而实现离线缓存和快速加载等功能。在安装阶段，通常会将一些静态资源添加到缓存中。</p></li><li><p>安装完成：当 Service Worker 脚本下载完成并缓存静态资源后，安装阶段就完成了。此时，Service Worker 还没有被激活，因此无法拦截网络请求。</p></li></ul><p>在这个阶段，Service Worker 开始接管网络请求，但并不一定立即生效，因为它需要等待所有已打开的页面关闭后才会生效。</p><p><strong>激活</strong> 在 Service Worker 激活阶段，可以执行一些操作，例如：</p><ul><li><p>缓存静态资源：可以在激活阶段缓存一些静态资源，这样在后续的请求中就可以直接从缓存中获取，从而提高页面加载速度。</p></li><li><p>清理旧版本缓存：如果我们更新了 Service Worker，可能会有一些旧版本的缓存仍然存在，这些缓存可能会导致页面出现问题。在激活阶段，可以清理这些旧版本的缓存，保证页面正常运行。</p></li><li><p>发送通知：可以在激活阶段发送一些通知，告知用户 Service Worker 已经更新，或者一些其他信息。</p></li></ul><p>注意，Service Worker 激活阶段只有在 Service Worker 注册成功后才会触发，如果注册失败，则不会进入激活阶段。另外，如果 Service Worker 更新失败，则不会触发激活阶段，而是继续使用旧版本的 Service Worker。</p><p><strong>运行</strong> 在 Service Worker 注册成功并且激活后，它开始接管网络请求，处理客户端的请求并返回响应的阶段。</p><p>在 Service Worker 运行阶段，我们可以执行一些操作，例如：</p><ul><li><p>缓存网络请求：可以在 Service Worker 运行阶段缓存一些网络请求，这样在后续的请求中就可以直接从缓存中获取，从而提高页面加载速度和离线访问能力。</p></li><li><p>拦截请求：可以在 Service Worker 运行阶段拦截客户端发送的请求，对请求进行处理，然后返回响应。这样可以实现一些高级的功能，例如离线访问、网络请求代理、请求重定向等。</p></li><li><p>推送消息：可以在 Service Worker 运行阶段向客户端推送消息，例如通知用户有新消息、提醒用户更新等。</p></li></ul><p>注意，Service Worker 运行阶段是一个长期运行的过程，直到 Service Worker 被注销或者浏览器关闭。需要注意一些问题，例如缓存策略、请求处理、错误处理、性能优化等。</p><p><strong>更新</strong> 指在已经注册并激活的 Service Worker 更新后，新版本的 Service Worker 开始接管网络请求的过程。</p><p>当一个新版本的 Service Worker 被注册后，它会等待所有已打开的页面关闭，然后进入激活阶段。在激活阶段，我们可以执行一些操作，例如清理旧版本缓存、发送通知等。然后新版本的 Service Worker 就会开始接管网络请求，处理客户端的请求并返回响应。</p><p>在 Service Worker 更新阶段，需要注意一些问题，例如：</p><ul><li><p>缓存策略：如果我们在新版本的 Service Worker 中修改了缓存策略，可能会导致客户端缓存出现问题。因此在更新 Service Worker 时需要注意缓存策略的兼容性。</p></li><li><p>请求处理：如果我们在新版本的 Service Worker 中修改了请求处理逻辑，可能会导致客户端请求出现问题。因此在更新 Service Worker 时需要注意请求处理逻辑的兼容性。</p></li><li><p>错误处理：如果新版本的 Service Worker 出现了错误，可能会导致客户端请求出现问题。因此在更新 Service Worker 时需要注意错误处理的兼容性。</p></li></ul><p>注意，如果新版本的 Service Worker 更新失败，可能会导致客户端出现问题。因此在更新 Service Worker 时需要进行充分的测试和验证，确保更新过程的稳定性和可靠性。</p><p><strong>出于安全考虑，Service worker 只能在 https 及 localhost 下被使用。</strong></p><h2 id="存储型缓存" tabindex="-1"><a class="header-anchor" href="#存储型缓存"><span>存储型缓存</span></a></h2><h3 id="网站登录背后的存储逻辑" tabindex="-1"><a class="header-anchor" href="#网站登录背后的存储逻辑"><span>网站登录背后的存储逻辑</span></a></h3><p>用户在客户端输入账号密码并点击登录后，前端将数据发送给服务端进行验证。如果校验成功，服务端会返回有效的 token 信息，后续客户端请求需要携带该 token 以供服务端验证用户登录的有效性，因此 <strong>token 信息在客户端的存储及传输，是用户不必重复登录的关键</strong>。</p><p><strong>服务端自动植入</strong> 服务端登录接口通过设置响应报头中的 <code>set-cookie</code> 首部字段，将 token 信息植入浏览器 <code>cookie</code> 中。 <code>set-cookie</code> 指令值包含了必选项 <code>&lt;cookie-name&gt;=&lt;cookie-value&gt;</code> 值和名的形式，同时还包括了可选项 Path（路径）、Domain（域名）、Max-Age（有效时间）等，以分号分隔。 之后前端调用同域下的接口时，浏览器会自动将网站的 cookie 值附加在请求头中传给后端进行校验，前端则不需要关心 token 的存取问题。</p><p><strong>前端手动存储</strong> 前端存储的方式不受限于浏览器环境（如像 APP 或小程序没有浏览器 cookie 的环境）。</p><p>前端获取到服务端登录接口返回的 token 信息，再通过前端存储方法将数据持久化缓存起来，并在退出后手动清除。后续，在调用接口时需要手动将 token 传递给服务端；</p><h3 id="浏览器存储型缓存方案" tabindex="-1"><a class="header-anchor" href="#浏览器存储型缓存方案"><span>浏览器存储型缓存方案</span></a></h3><p><strong>Cookie 存储方案</strong> Cookie 最初是为了辨别用户身份，实现页面间状态的维持和传递。</p><p>其存储空间很小，不能超过 4KB。</p><p>当 Cookie 在同域下被设置时，它会随着每一次资源请求的请求报头一起传递到服务端进行验证。如果存在过多的 Cookie，将会导致无效资源的传输和性能浪费。</p><p>由于 Cookie 无法跨域传输，因此可以利用这一特点在 CDN 域名上进行优化。如果 CDN 资源和主站采用了相同的域名，那么 Cookie 的传输将会导致巨大的性能浪费。相反，可以将 CDN 的域名与主站区分开来，以避免这个问题。</p><p>浏览器提供的原始 Cookie 存储 API 使用起来并不是特别方便。可使用 <a href="https://www.npmjs.com/package/js-cookie" target="_blank" rel="noopener noreferrer">js-cookie</a> 库，它封装了 Cookie 的常用操作，提供了简单易用的 API。</p><p><strong>Web Storage 存储方案</strong><code>Web Storage</code> 作为 HTML5 推出的浏览器存储机制，其又可分为 <code>Session Storage</code> 和 <code>Local Storage</code>，两者相辅相成。</p><p>Session Storage 作为临时性的本地存储，其生命周期存在于网页会话期间，即使用 Session Storage 存储的缓存数据在网页关闭后会自动释放，并不是持久性的。而 Local Storage 则存储于浏览器本地，除非手动删除或过期，否则其一直存在，属于持久性缓存。</p><p>Web Storage 与 Cookie 相比存储大小得到了明显的提升，一般为 2.5-10M 之间（各家浏览器不同）。</p><div class="hint-container warning"><p class="hint-container-title">注意：Web Storage 存储的数据最终都会转化成字符串类型</p><p>存储对象时如果没有提前采用序列化方法 <code>JSON.stringify</code> 转化为字符串对象，那么最终获取的值会变成 <code>[object Object]</code>。</p><p>可对 Local Storage 封装方法，赋予其过期时间和自动序列化反序列化的能力，此时便无需再关心存储数据的格式问题。</p><p>npm 上有处理此问题的包：<a href="https://github.com/wuchangming/web-storage-cache" target="_blank" rel="noopener noreferrer">web-storage-cache</a></p></div><p><strong>IndexedDB 存储方案</strong> IndexedDB 是一个大规模的 NoSQL 存储系统，它几乎可以存储浏览器中的任何数据内容，包括二进制数据（ArrayBuffer 对象和 Blob 对象），其可以存储不少于 250M 的数据。</p><p>npm 上比较流行的封装 IndexedDB 的包 <a href="https://github.com/jakearchibald/idb" target="_blank" rel="noopener noreferrer">idb</a> 可以简化原始 API 的操作流程。</p><h2 id="chrome-浏览器-application-面板" tabindex="-1"><a class="header-anchor" href="#chrome-浏览器-application-面板"><span>Chrome 浏览器 Application 面板</span></a></h2><p>Chrome Application 面板集成了对浏览器存储数据的一系列操作功能，比如清空存储数据、操作查看 Cookie / Web Storage、查看删除 IndexedDB、调试 Service Worker 等。</p><div class="hint-container warning"><p class="hint-container-title">HttpOnly</p><p>当 Cookie 数据中对应的 <code>HttpOnly</code> 字段显示被勾选时，表示该 Cookie 不可通过 JS 获取和修改。</p></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="https://juejin.cn/book/6994678547826606095" target="_blank" rel="noopener noreferrer">前端缓存技术与方案解析 - 劳卜 - 掘金小册</a></li><li><a href="https://juejin.cn/post/6992843117963509791" target="_blank" rel="noopener noreferrer">彻底理解浏览器的缓存机制 - 掘金</a></li><li><a href="https://github.com/wsafight/personBlog/issues/34" target="_blank" rel="noopener noreferrer">手写一个基于 Proxy 的缓存库 · Issue #34 · wsafight/personBlog</a></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/huguangju/huguangju.github.io/edit/main/src/code/basic/fed-cache-and-tec-solutions2.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/11/21 05:33:38</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: huguangjugit@163.com">huguangju</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Copyright © 2022-2024 Carson hu</div><div class="vp-copyright">Copyright © 2024 huguangju </div></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C_1RVQww.js" defer></script>
  </body>
</html>
